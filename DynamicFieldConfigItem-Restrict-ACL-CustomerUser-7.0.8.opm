<?xml version="1.0" encoding="utf-8" ?>
<otrs_package version="1.1">
    <Name>DynamicFieldConfigItem-Restrict-ACL-CustomerUser</Name>
    <Version>7.0.8</Version>
    <Vendor>mo-azfar</Vendor>
    <URL>https://github.com/mo-azfar</URL>
    <License>GNU GENERAL PUBLIC LICENSE Version 3, 29 June 2007</License>
    <ChangeLog Version="7.0.1">New package.</ChangeLog>
    <ChangeLog Version="7.0.2">Update code.</ChangeLog>
    <ChangeLog Version="7.0.3">Update to include CI Deployment State from XML config.</ChangeLog>
    <ChangeLog Version="7.0.4">Update supported framework 6.5.x. Update version to reflex latest supported framework</ChangeLog>
    <ChangeLog Version="7.0.5">Update supported framework 7.0.x. Filename changes and add support for Incident state.</ChangeLog>
    <ChangeLog Version="7.0.6">Fix for `Use of uninitialized value` notice.</ChangeLog>
    <ChangeLog Version="7.0.7">Add support for customer company.</ChangeLog>
    <ChangeLog Version="7.0.8">Applied code policy.</ChangeLog>
    <Description Lang="en">System ACL that restrict DynamicFieldConfigItem value based on customer user.</Description>
    <Framework>6.4.x</Framework>
    <Framework>6.5.x</Framework>
    <Framework>7.0.x</Framework>
    <IntroInstall Lang="en" Title="Install Information" Type="pre">
        &lt;br&gt;
        &lt;br&gt;&lt;br&gt;WELCOME&lt;br&gt;&lt;br&gt;;
        &lt;br&gt;&lt;br&gt;
        &lt;br&gt;&lt;br&gt;
        You are about to install the package DynamicFieldConfigItem-Restrict-ACL-CustomerUser. &lt;a href='https://github.com/mo-azfar/Znuny-DynamicFieldConfigItem-RestrictCIByCustomerUser' target='_blank'&gt;README&lt;/a&gt;&lt;br&gt;
        &lt;br&gt;
        &lt;br&gt;
        &lt;br&gt;
    </IntroInstall>
    <IntroUpgrade Lang="en" Title="Upgrade Information" Type="pre">
        &lt;br&gt;
        &lt;br&gt;&lt;br&gt;WELCOME&lt;br&gt;&lt;br&gt;;
        &lt;br&gt;&lt;br&gt;
        &lt;br&gt;&lt;br&gt;
        You are about to upgrade the package DynamicFieldConfigItem-Restrict-ACL-CustomerUser. &lt;a href='https://github.com/mo-azfar/Znuny-DynamicFieldConfigItem-RestrictCIByCustomerUser' target='_blank'&gt;README&lt;/a&gt;&lt;br&gt;
        &lt;br&gt;
        &lt;br&gt;
        &lt;b&gt;Please reset and reconfigure Admin &gt; System Configuration &gt; Ticket::Acl::Module###5-RestrictDFCIByCustomerUser
        &lt;br&gt;
    </IntroUpgrade>
    <BuildDate>2024-03-27 11:25:43</BuildDate>
    <BuildHost>app.wsl.my</BuildHost>
    <Filelist>
        <File Location="Kernel/Config/Files/XML/ZZZRestrictDFCIByCustomerUser.xml" Permission="660" Encode="Base64">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPG90cnNfY29uZmlnIHZlcnNpb249IjIuMCIgaW5pdD0iQ29uZmlnIj4KICAgIDxTZXR0aW5nIE5hbWU9IlRpY2tldDo6QWNsOjpNb2R1bGUjIyM1LVJlc3RyaWN0REZDSUJ5Q3VzdG9tZXJVc2VyIiBSZXF1aXJlZD0iMCIgVmFsaWQ9IjEiPgogICAgICAgIDxEZXNjcmlwdGlvbiBUcmFuc2xhdGFibGU9IjEiPlN5c3RlbSBiYXNlZCBBQ0wgbW9kdWxlIHRoYXQgc2hvdyBEeW5hbWljIEZpZWxkIENvbmZpZyBJdGVtIHZhbHVlIGJhc2VkIG9uIEN1c3RvbWVyIFVzZXIgb3IgQ3VzdG9tZXIgKENvbXBhbnkpLjwvRGVzY3JpcHRpb24+CiAgICAgICAgPE5hdmlnYXRpb24+Q29yZTo6VGlja2V0OjpBQ0w8L05hdmlnYXRpb24+CiAgICAgICAgPFZhbHVlPgogICAgICAgICAgICA8SGFzaD4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iTW9kdWxlIj5LZXJuZWw6OlN5c3RlbTo6VGlja2V0OjpBY2w6OlJlc3RyaWN0REZDSUJ5Q3VzdG9tZXJVc2VyPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJBY3Rpb24iPgogICAgICAgICAgICAgICAgICAgIDxIYXNoPgogICAgICAgICAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkFnZW50VGlja2V0UGhvbmUiPjE8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iQWdlbnRUaWNrZXRFbWFpbCI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJBZ2VudFRpY2tldEZyZWVUZXh0Ij4xPC9JdGVtPgogICAgICAgICAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkN1c3RvbWVyVGlja2V0TWVzc2FnZSI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICA8L0hhc2g+CiAgICAgICAgICAgICAgICA8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9Ik9iamVjdFR5cGUiIFZhbHVlVHlwZT0iU2VsZWN0IiBTZWxlY3RlZElEPSIxIj4KICAgICAgICAgICAgICAgICAgICA8SXRlbSBWYWx1ZVR5cGU9Ik9wdGlvbiIgVmFsdWU9IjEiIFRyYW5zbGF0YWJsZT0iMSI+Q3VzdG9tZXIgVXNlcjwvSXRlbT4KICAgICAgICAgICAgICAgICAgICA8SXRlbSBWYWx1ZVR5cGU9Ik9wdGlvbiIgVmFsdWU9IjIiIFRyYW5zbGF0YWJsZT0iMSI+Q3VzdG9tZXIgKENvbXBhbnkpPC9JdGVtPgogICAgICAgICAgICAgICAgPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJDSUZpZWxkTmFtZVJlZmVyZW5jZSI+T3duZXI8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkRlcGxTdGF0ZSI+CiAgICAgICAgICAgICAgICAgICAgPEFycmF5PgogICAgICAgICAgICAgICAgICAgIDwvQXJyYXk+CiAgICAgICAgICAgICAgICA8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkluY2lTdGF0ZSI+CiAgICAgICAgICAgICAgICAgICAgPEFycmF5PgogICAgICAgICAgICAgICAgICAgIDwvQXJyYXk+CiAgICAgICAgICAgICAgICA8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IlJlbGF0ZWREeW5hbWljRmllbGQiPgogICAgICAgICAgICAgICAgICAgIDxBcnJheT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0+UmVsYXRlZENvbXB1dGVyPC9JdGVtPgogICAgICAgICAgICAgICAgICAgIDwvQXJyYXk+CiAgICAgICAgICAgICAgICA8L0l0ZW0+CiAgICAgICAgICAgIDwvSGFzaD4KICAgICAgICA8L1ZhbHVlPgogICAgPC9TZXR0aW5nPgo8L290cnNfY29uZmlnPgo=</File>
        <File Location="Kernel/System/Ticket/Acl/RestrictDFCIByCustomerUser.pm" Permission="660" Encode="Base64">IyAtLQojIENvcHlyaWdodCAoQykgMjAyNCBtby1hemZhciwgaHR0cHM6Ly9naXRodWIuY29tL21vLWF6ZmFyCiMgLS0KIyBUaGlzIHNvZnR3YXJlIGNvbWVzIHdpdGggQUJTT0xVVEVMWSBOTyBXQVJSQU5UWS4gRm9yIGRldGFpbHMsIHNlZQojIHRoZSBlbmNsb3NlZCBmaWxlIENPUFlJTkcgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24gKEdQTCkuIElmIHlvdQojIGRpZCBub3QgcmVjZWl2ZSB0aGlzIGZpbGUsIHNlZSBodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2dwbC0zLjAudHh0LgojIC0tCgpwYWNrYWdlIEtlcm5lbDo6U3lzdGVtOjpUaWNrZXQ6OkFjbDo6UmVzdHJpY3RERkNJQnlDdXN0b21lclVzZXI7Cgp1c2Ugc3RyaWN0Owp1c2Ugd2FybmluZ3M7CgpvdXIgQE9iamVjdERlcGVuZGVuY2llcyA9ICgKICAgICdLZXJuZWw6OlN5c3RlbTo6RHluYW1pY0ZpZWxkJywKICAgICdLZXJuZWw6OlN5c3RlbTo6R2VuZXJhbENhdGFsb2cnLAogICAgJ0tlcm5lbDo6U3lzdGVtOjpJVFNNQ29uZmlnSXRlbScsCiAgICAnS2VybmVsOjpTeXN0ZW06OkxvZycsCik7CgpzdWIgbmV3IHsKICAgIG15ICggJFR5cGUsICVQYXJhbSApID0gQF87CgogICAgIyBhbGxvY2F0ZSBuZXcgaGFzaCBmb3Igb2JqZWN0CiAgICBteSAkU2VsZiA9IHt9OwogICAgYmxlc3MoICRTZWxmLCAkVHlwZSApOwoKICAgIHJldHVybiAkU2VsZjsKfQoKc3ViIFJ1biB7CiAgICBteSAoICRTZWxmLCAlUGFyYW0gKSA9IEBfOwoKICAgICMgY2hlY2sgbmVlZGVkIHN0dWZmCiAgICBmb3IgKHF3KENvbmZpZyBBY2wpKSB7CiAgICAgICAgaWYgKCAhJFBhcmFteyRffSApIHsKICAgICAgICAgICAgJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkxvZycpLT5Mb2coCiAgICAgICAgICAgICAgICBQcmlvcml0eSA9PiAnZXJyb3InLAogICAgICAgICAgICAgICAgTWVzc2FnZSAgPT4gIk5lZWQgJF8hIgogICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiAxIGlmICEkUGFyYW17Q2hlY2tzfS0+e0N1c3RvbWVyVXNlcn0tPntVc2VyTG9naW59OwoKICAgICNnZXQgcGFyZW1ldGVyCiAgICBteSAlR2V0UGFyYW07CiAgICBmb3IgbXkgJE5lZWRlZCAocXcoIENJRmllbGROYW1lUmVmZXJlbmNlIFJlbGF0ZWREeW5hbWljRmllbGQgQWN0aW9uIE9iamVjdFR5cGUgKSkKICAgIHsKICAgICAgICByZXR1cm4gMSBpZiAhJFBhcmFte0NvbmZpZ30tPnskTmVlZGVkfTsKICAgIH0KCiAgICBteSAkR2VuZXJhbENhdGFsb2dPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6R2VuZXJhbENhdGFsb2cnKTsKICAgIG15ICRDb25maWdJdGVtT2JqZWN0ICAgICA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpJVFNNQ29uZmlnSXRlbScpOwogICAgbXkgJER5bmFtaWNGaWVsZE9iamVjdCAgID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZCcpOwoKICAgIG15ICRBY3Rpb24gPSAkUGFyYW17Q2hlY2tzfS0+e0Zyb250ZW5kfS0+e0FjdGlvbn0gfHwgJyc7CgogICAgcmV0dXJuIDEgaWYgISRBY3Rpb247CgogICAgI29ubHkgZ2VuZXJhdGUgYWNsIGJhc2VkIG9uIGRlZmluZSBmcm9udGVuZCBhY3Rpb24KICAgIHJldHVybiAxIGlmICEkUGFyYW17Q29uZmlnfS0+e0FjdGlvbn0tPnskQWN0aW9ufTsKCiAgICBEWU5BTUlDRklFTEQ6CiAgICBmb3IgKCBAeyAkUGFyYW17Q29uZmlnfS0+e1JlbGF0ZWREeW5hbWljRmllbGR9IH0gKQogICAgewogICAgICAgIG15ICREeW5hbWljRmllbGQgPSAkRHluYW1pY0ZpZWxkT2JqZWN0LT5EeW5hbWljRmllbGRHZXQoCiAgICAgICAgICAgIE5hbWUgPT4gJF8sCiAgICAgICAgKTsKCiAgICAgICAgbmV4dCBEWU5BTUlDRklFTEQgaWYgISREeW5hbWljRmllbGQtPntDb25maWd9LT57Q29uZmlnSXRlbUNsYXNzfTsKCiAgICAgICAgbXkgQENsYXNzSURzOwogICAgICAgIG15IEBEZXBsU3RhdGVJRHM7CiAgICAgICAgbXkgQEluY2lTdGF0ZUlEczsKCiAgICAgICAgI2dldCBjb25maWcgaXRlbSBjbGFzcyBpZCBiYXNlZCBvbiBkeW5hbWljIGZpZWxkCiAgICAgICAgbXkgJENsYXNzSUQgPSAkR2VuZXJhbENhdGFsb2dPYmplY3QtPkl0ZW1HZXQoCiAgICAgICAgICAgIENsYXNzID0+ICdJVFNNOjpDb25maWdJdGVtOjpDbGFzcycsCiAgICAgICAgICAgIE5hbWUgID0+ICREeW5hbWljRmllbGQtPntDb25maWd9LT57Q29uZmlnSXRlbUNsYXNzfSwKICAgICAgICApOwoKICAgICAgICBwdXNoIEBDbGFzc0lEcywgJENsYXNzSUQtPntJdGVtSUR9OwoKICAgICAgICAjZ2V0IGRlcGxveW1lbnQgc3RhdGUKICAgICAgICBpZiAoIEB7ICRQYXJhbXtDb25maWd9LT57RGVwbFN0YXRlfSB9ICkKICAgICAgICB7CiAgICAgICAgICAgICNnZXQgY29uZmlnIGl0ZW0gZGVwbG95bWVudCBzdGF0ZSBpZCBiYXNlZCBvbiBjb25maWcKICAgICAgICAgICAgZm9yICggQHsgJFBhcmFte0NvbmZpZ30tPntEZXBsU3RhdGV9IH0gKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBteSAkRGVwbFN0YXRlSUQgPSAkR2VuZXJhbENhdGFsb2dPYmplY3QtPkl0ZW1HZXQoCiAgICAgICAgICAgICAgICAgICAgQ2xhc3MgPT4gJ0lUU006OkNvbmZpZ0l0ZW06OkRlcGxveW1lbnRTdGF0ZScsCiAgICAgICAgICAgICAgICAgICAgTmFtZSAgPT4gJF8sCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgcHVzaCBARGVwbFN0YXRlSURzLCAkRGVwbFN0YXRlSUQtPntJdGVtSUR9OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICNnZXQgY29uZmlnIGl0ZW0gZGVwbG95bWVudCBzdGF0ZSBpZCBiYXNlZCBvbiBkeW5hbWljIGZpZWxkCiAgICAgICAgICAgIGZvciAoIEB7ICREeW5hbWljRmllbGQtPntDb25maWd9LT57RGVwbFN0YXRlc30gfSApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG15ICREZXBsU3RhdGVJRCA9ICRHZW5lcmFsQ2F0YWxvZ09iamVjdC0+SXRlbUdldCgKICAgICAgICAgICAgICAgICAgICBDbGFzcyA9PiAnSVRTTTo6Q29uZmlnSXRlbTo6RGVwbG95bWVudFN0YXRlJywKICAgICAgICAgICAgICAgICAgICBOYW1lICA9PiAkXywKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBwdXNoIEBEZXBsU3RhdGVJRHMsICREZXBsU3RhdGVJRC0+e0l0ZW1JRH07CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICNnZXQgaW5jaWRlbnQgc3RhdGUKICAgICAgICBpZiAoIEB7ICRQYXJhbXtDb25maWd9LT57SW5jaVN0YXRlfSB9ICkKICAgICAgICB7CiAgICAgICAgICAgICNnZXQgY29uZmlnIGl0ZW0gZGVwbG95bWVudCBzdGF0ZSBpZCBiYXNlZCBvbiBjb25maWcKICAgICAgICAgICAgZm9yICggQHsgJFBhcmFte0NvbmZpZ30tPntJbmNpU3RhdGV9IH0gKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBteSAkRGVwbFN0YXRlSUQgPSAkR2VuZXJhbENhdGFsb2dPYmplY3QtPkl0ZW1HZXQoCiAgICAgICAgICAgICAgICAgICAgQ2xhc3MgPT4gJ0lUU006OkNvcmU6OkluY2lkZW50U3RhdGUnLAogICAgICAgICAgICAgICAgICAgIE5hbWUgID0+ICRfLAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHB1c2ggQEluY2lTdGF0ZUlEcywgJERlcGxTdGF0ZUlELT57SXRlbUlEfTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbXkgJEN1c3RvbWVyOwogICAgICAgIG15ICRQcm9wZXJ0aWVzOwoKICAgICAgICAjY3VzdG9tZXIgdXNlciBiYXNlZAogICAgICAgIGlmICggJFBhcmFte0NvbmZpZ30tPntPYmplY3RUeXBlfSBlcSAxICkKICAgICAgICB7CiAgICAgICAgICAgICRQcm9wZXJ0aWVzID0gIlVzZXJMb2dpbiI7CiAgICAgICAgICAgICRDdXN0b21lciAgID0gJFBhcmFte0NoZWNrc30tPntDdXN0b21lclVzZXJ9LT57VXNlckxvZ2lufTsKICAgICAgICB9CgogICAgICAgICNjdXN0b21lciBjb21wYW55IGJhc2VkCiAgICAgICAgZWxzaWYgKCAkUGFyYW17Q29uZmlnfS0+e09iamVjdFR5cGV9IGVxIDIgKQogICAgICAgIHsKICAgICAgICAgICAgJFByb3BlcnRpZXMgPSAiVXNlckN1c3RvbWVySUQiOwogICAgICAgICAgICAkQ3VzdG9tZXIgICA9ICRQYXJhbXtDaGVja3N9LT57Q3VzdG9tZXJVc2VyfS0+e1VzZXJDdXN0b21lcklEfTsKICAgICAgICB9CgogICAgICAgICNzZWFyY2ggY29uZmlnIGl0ZW0KICAgICAgICBteSAkQ29uZmlnSXRlbUlEcyA9ICRDb25maWdJdGVtT2JqZWN0LT5Db25maWdJdGVtU2VhcmNoRXh0ZW5kZWQoCiAgICAgICAgICAgIENsYXNzSURzICAgICA9PiBbQENsYXNzSURzXSwKICAgICAgICAgICAgRGVwbFN0YXRlSURzID0+IFtARGVwbFN0YXRlSURzXSwKICAgICAgICAgICAgSW5jaVN0YXRlSURzID0+IFtASW5jaVN0YXRlSURzXSwKICAgICAgICAgICAgV2hhdCAgICAgICAgID0+IFsKCiAgICAgICAgICAgICAgICAjIGVhY2ggYXJyYXkgZWxlbWVudCBpcyBhIGFuZCBjb25kaXRpb24KICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAiWyVdeydWZXJzaW9uJ31bJV17JyRQYXJhbXtDb25maWd9LT57Q0lGaWVsZE5hbWVSZWZlcmVuY2V9J31bJV17J0NvbnRlbnQnfSIgPT4gWyRDdXN0b21lcl0sCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0sCgogICAgICAgICk7CgogICAgICAgIG15ICRBQ0xOYW1lID0gJ0FDTF8nIC4gJEN1c3RvbWVyIC4gJ18nIC4gJF87CgogICAgICAgICRQYXJhbXtBY2x9LT57JEFDTE5hbWV9ID0gewogICAgICAgICAgICBQcm9wZXJ0aWVzID0+IHsKICAgICAgICAgICAgICAgIEN1c3RvbWVyVXNlciA9PiB7CiAgICAgICAgICAgICAgICAgICAgJFByb3BlcnRpZXMgPT4gWyRDdXN0b21lcl0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAoKICAgICAgICAgICAgIyByZXR1cm4gcG9zc2libGUgb3B0aW9ucyAod2hpdGUgbGlzdCkKICAgICAgICAgICAgUG9zc2libGUgPT4gewogICAgICAgICAgICAgICAgVGlja2V0ID0+IHsKICAgICAgICAgICAgICAgICAgICAnRHluYW1pY0ZpZWxkXycgLiAkXyA9PiBbICcnLCBAeyRDb25maWdJdGVtSURzfSBdLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICB9OwoKICAgIH0KCiAgICByZXR1cm4gMTsKfQoKMTsK</File>
    </Filelist>
</otrs_package>